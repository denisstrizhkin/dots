#!/bin/sh

# dbus session
if which dbus-launch >/dev/null && test -z "$DBUS_SESSION_BUS_ADDRESS"; then
       eval `dbus-launch --sh-syntax --exit-with-session`
fi

# set runtime dir
unset XDG_RUNTIME_DIR
export XDG_RUNTIME_DIR=$(mktemp -d /tmp/$(id -u)-runtime-dir.XXX)

# set im method
#export GTK_IM_MODULE=fcitx
#export QT_IM_MODULE=fcitx
#export XMODIFIERS=@im=fcitx
export XMODIFIERS=@im=exwm-xim
export GTK_IM_MODULE=xim
export CLUTTER_IM_MODULE=xim
export QT_IM_MODULE=xim

pipewire &
pipewire-pulse &

#emacs --daemon &
mpd &

#fcitx5 &

#barupdate.sh &

xrandr --output HDMI-1 --mode 1920x1080 --rate 60.00 --dpi 120 \
       --brightness 1.0 --gamma 0.76:0.75:0.68 &
xrdb -merge "$XDG_CONFIG_HOME/x11/xresources"

#exec dwm

exec emacs
