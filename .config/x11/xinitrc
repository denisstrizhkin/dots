#!/bin/sh

# dbus session
#if which dbus-launch >/dev/null && test -z "$DBUS_SESSION_BUS_ADDRESS"; then
#    eval `dbus-launch --sh-syntax --exit-with-session`
#fi

# set runtime dir
unset XDG_RUNTIME_DIR
export XDG_RUNTIME_DIR=$(mktemp -d /tmp/$(id -u)-runtime-dir.XXXXXXXXXX)

# set im method
#export GTK_IM_MODULE=fcitx
#export QT_IM_MODULE=fcitx
#export XMODIFIERS=@im=fcitx

mpd &

emacs --daemon &

transmission-daemon &

xrdb -merge "$XDG_CONFIG_HOME"/x11/xresources

xsetroot -solid black &
xet -s off &

setxkbmap -layout us,ru -option -option grp:win_space_toggle &



_monitor_connected () { ! [ -z "$(xrandr | grep "$1 connected")" ]; }


if _monitor_connected "HDMI-1" && _monitor_connected "DVI-I-1"; then
    xrandr --output HDMI-1 --mode 1920x1080 --rate 60.0*+ --primary \
					 --brightness 1.0 --gamma 0.76:0.75:0.68 \
					 --output DVI-I-1 --mode 1920x1080 --rate 60.0*+ --right-of HDMI-1 --rotate left \
					 --brightness 1.0 --gamma 0.76:0.75:0.68
fi


if _monitor_connected "eDP-1"; then
		xrandr --output eDP-1 --mode 1920x1080 --rate 60.01*+ \
					 --brightness 1.0 --gamma 0.76:0.75:0.68
fi


exec xterm -name termbar -class termbar -T termbar -e \
		 "$HOME"/.local/bin/my_scripts/termbar &

exec cwm -c "$XDG_CONFIG_HOME"/cwmrc
#exec bspwm
